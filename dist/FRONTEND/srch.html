<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>SEARCH</h1>
    <div class="src">
        <input id="input" type="text" value="">
        <button id="Submit" value="Submit">Submit</button>
    </div>
    <div id="RES" class="RES">
        <p id="resu"></p>
    </div>
    <script>
        let input  = document.getElementById("input")
        let disp = document.getElementById("RES")
        let p = document.getElementById("resu")
        let btn = document.getElementById("Submit")
        console.log("This is the input val",input.value)
        btn.addEventListener('click',()=>{
            fetch('/emp/srch',{
            method:"POST",
            headers:{
                'Accept': 'application/json',
                    'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                "dt":`${input.value}`
            })})
            .then(response=>response.json())
            .then(img=>{
                img.img.forEach(element=>{
                    if(element.message===undefined){
                        p.textContent=''
                        console.log("This is the data",element)
                        const listItem = document.createElement('img')
                        const br = document.createElement('br')
                        listItem.src = "./IMAGES/"+element.dir
                        
                        disp.appendChild(listItem)
                        disp.appendChild(br)
                        disp.style.textAlign='center'
                         
                         
                    }else{
                         
                        console.log(element.message)
                        document.querySelectorAll(".src img").forEach(img=>img.remove())
                        p.textContent='DIDNT FIND'
                       
                    }
                        
                    
                })
                
            })
            .catch(error=>{
                 p.textContent='DIDNT FIND'
            })
        
        })
    </script>
</body>
</html>